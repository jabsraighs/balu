{% extends 'base.html.twig' %}

{% import '_components/_table_light.html.twig' as table %}


{% block title %}Client
{% endblock %}

{% block javascripts %}
    {{ parent() }}
	{{ encore_entry_script_tags('client_show') }}
{% endblock %}

{% set headerRows = [['Nom', 'Crée le','A regler pour le', 'Status du Paiement', 'Prix']] %}
{% set keys = ['name', 'createdAt', 'dueDate','paymentStatus', 'totalAmount'] %}

{% set headerRowsQuotes = [['Nom', 'Crée le','Expire le', 'Status', 'Prix']] %}
{% set keysQuotes = ['name', 'createdAt', 'expiryAt','status', 'totalAmount'] %}

{% block body %}
	<div class="mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10">
		<div class="mx-auto">
			<div class="mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
				<h1 class="text-3xl text-secondary-500 font-extrabold">
					Client
				</h1>

				<nav>
					<ol class="flex items-center gap-2">
						<li>
							<a class="font-medium text-secondary-200" href="{{ path('front_accueil' ) }}">Tableau de bord /</a>
						</li>
						<li>
							<a class="font-medium text-secondary-200" href="{{ path('front_user_client_index' ) }}">Clients /</a>
						</li>
						<li class="text-primary-500">Client</li>
					</ol>
				</nav>
			</div>

			<div class="overflow-hidden rounded-lg border border-stroke bg-white shadow-default p-4">
				<ul class="flex flex-col gap-1 md:flex-row md:justify-end md:gap-2">
					<li class="text-primary-400"><a href="{{path('front_user_invoice_new', {client_id: client.id})}}">Nouvelle facture</a></li>
					<li class="text-primary-400"><a href="{{path('front_user_quote_new', {client_id: client.id})}}">Nouveau devis</a></li>
					<li class="text-primary-400"><a href="{{path('front_user_client_edit', {id: client.id})}}">Modifier</a></li>
					<li class="text-primary-400"><a href="{{path('front_user_client_delete', {id: client.id})}}">Supprimer</a></li>
				</ul>

				<hr class="h-px my-3 bg-gray-200 border-0">

				<div class="flex flex-col gap-2 mt-4">
					<h2 class="text-xl text-secondary-600 font-bold mb-4">{{client.lastname}}
						{{client.firstname}}</h2>


					<ul class="flex flex-wrap text-sm font-medium text-center text-gray-500 border-b border-gray-200 ">
						<li class="me-2 cursor-pointer">
							<p aria-current="page" data-tabTitle="info" class="inline-block p-4 text-white bg-secondary rounded-t-lg transition-colors ease-in">Info</a>
						</li>
						<li class="me-2 cursor-pointer">
							<p data-tabTitle="invoices" class="inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 transition-colors ease-in">Factures</a>
						</li>
						<li class="me-2 cursor-pointer">
							<p class="inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 transition-colors ease-in" data-tabTitle="quotes">Devis</a>
						</li>
					</ul>

					<div class="flex flex-col gap-1 text-sm mt-4" data-tab="info">
						<div class="flex flex-col gap-1">
							<p class="text-secondary-300">Adresse de facturation:
							</p>
							<p>{{client.address}}</p>
						</div>
						<div class="flex flex-col gap-1">
							<p class="text-secondary-300">E-mail:
							</p>
							<p>{{client.email}}</p>
						</div>
						<div class="flex flex-col gap-1">
							<p class="text-secondary-300">Numéro de téléphone:
							</p>
							<p>{{client.phone}}</p>
						</div>
					</div>

                    <div class="flex-col gap-1 text-sm mt-4 hidden" data-tab="invoices">
							{{ table.renderTable(client.invoices, headerRows, keys, "Pas de factures.") }}
                    </div>
                    
                    <div class="flex-col gap-1 text-sm mt-4 hidden" data-tab="quotes">
							{{ table.renderTable(client.quotes, headerRowsQuotes, keysQuotes, "Pas de devis.") }}
                    </div>
				</div>
			</div>
		</div>
	</div>

	{# <a href="{{ path('front_user_client_index') }}">back to list</a>
				
				    <a href="{{ path('front_user_client_edit', {'id': client.id}) }}">edit</a>
				
				    {{ include('Front/user/client/_delete_form.html.twig') }} #}
{% endblock %}
